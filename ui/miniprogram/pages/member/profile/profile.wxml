<!--pages/member/profile/profile.wxml-->
<view class="profile-container">
  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view wx:if="{{!hasUserInfo}}" class="not-login">
    <fresh-card type="primary" shadow="{{true}}" radius="large">
      <view class="not-login-content">
        <view class="login-icon">ğŸ‘¤</view>
        <view class="login-title">è¯·å…ˆç™»å½•</view>
        <view class="login-desc">ç™»å½•åå¯æŸ¥çœ‹ä¸ªäººä¿¡æ¯å’Œä½¿ç”¨æ›´å¤šåŠŸèƒ½</view>
        <fresh-button
          type="primary"
          size="large"
          text="ç«‹å³ç™»å½•"
          bindtap="goToLogin"
        />
      </view>
    </fresh-card>
  </view>

  <!-- å·²ç™»å½•çŠ¶æ€ -->
  <view wx:else class="profile-content">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <fresh-card type="primary" shadow="{{true}}" radius="large">
        <view class="user-info">
          <!-- å¤´åƒ -->
          <view class="avatar-section" bindtap="onChooseAvatar">
            <image 
              class="user-avatar" 
              src="{{userInfo.avatar || '/images/default-avatar.png'}}" 
              mode="aspectFill"
            />
            <view class="avatar-edit">ğŸ“·</view>
          </view>

          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <view class="user-details">
            <view class="user-name">{{userInfo.nickname || userInfo.username}}</view>
            <view class="user-meta">
              <text wx:if="{{userInfo.phone}}">ğŸ“± {{userInfo.phone}}</text>
              <text wx:if="{{userInfo.email}}">ğŸ“§ {{userInfo.email}}</text>
            </view>
            <view class="user-stats">
              <view class="stat-item">
                <view class="stat-value">Â¥{{formatMoney(userInfo.balance)}}</view>
                <view class="stat-label">ä½™é¢</view>
              </view>
              <view class="stat-divider"></view>
              <view class="stat-item">
                <view class="stat-value">{{userInfo.points || 0}}</view>
                <view class="stat-label">ç§¯åˆ†</view>
              </view>
            </view>
          </view>
        </view>
      </fresh-card>
    </view>

    <!-- åŠŸèƒ½èœå• -->
    <view class="menu-section">
      <view class="section-title">åŠŸèƒ½èœå•</view>
      
      <fresh-card shadow="{{true}}" radius="medium">
        <view class="menu-list">
          <view 
            wx:for="{{menuList}}" 
            wx:key="title"
            class="menu-item"
            data-url="{{item.url}}"
            bindtap="onMenuTap"
          >
            <view class="menu-icon">{{item.icon}}</view>
            <view class="menu-content">
              <view class="menu-title">{{item.title}}</view>
              <view class="menu-desc">{{item.desc}}</view>
            </view>
            <view class="menu-arrow">â€º</view>
          </view>
        </view>
      </fresh-card>
    </view>

    <!-- é€€å‡ºç™»å½• -->
    <view class="logout-section">
      <fresh-button
        type="danger"
        size="large"
        block="{{true}}"
        text="é€€å‡ºç™»å½•"
        bindtap="onLogout"
      />
    </view>
  </view>
</view>