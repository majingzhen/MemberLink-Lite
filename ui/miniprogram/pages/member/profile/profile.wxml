<!--pages/member/profile/profile.wxml-->
<view class="container">
  <!-- 主要内容区 -->
  <view class="main-content">
    <!-- <view class="page-title">个人中心</view> -->
    
    <!-- 未登录状态 -->
    <view wx:if="{{!hasUserInfo}}" class="not-login">
      <view class="login-card">
        <view class="login-icon">👤</view>
        <view class="login-title">请先登录</view>
        <view class="login-desc">登录后查看个人信息</view>
        <button class="login-btn" bindtap="goToLogin">
          立即登录
        </button>
      </view>
    </view>

    <!-- 已登录状态 -->
    <view wx:else class="profile-content">
      <!-- 用户信息卡片 -->
      <view class="user-card">
        <view class="user-info-section">
          <image 
            class="user-avatar" 
            src="{{userInfo.avatar || '/images/default-avatar.png'}}" 
            mode="aspectFill"
          ></image>
          <view class="user-details">
            <view class="user-name">{{userInfo.nickname || userInfo.username}}</view>
            <view class="user-subtitle">ID: {{userInfo.id}}</view>
          </view>
        </view>
        
        <view class="user-stats">
          <view class="stat-item">
            <view class="stat-value balance">¥{{userInfo.balance || 0}}</view>
            <view class="stat-label">余额</view>
          </view>
          <view class="stat-item">
            <view class="stat-value points">{{userInfo.points || 0}}</view>
            <view class="stat-label">积分</view>
          </view>
          <view class="stat-item">
            <view class="stat-value status">{{userInfo.status === 1 ? '正常' : '异常'}}</view>
            <view class="stat-label">状态</view>
          </view>
        </view>
      </view>

      <!-- 账户管理菜单 -->
      <view class="menu-section">
        <view class="section-title">账户管理</view>
        <view class="menu-grid">
          <view class="menu-item" bindtap="editProfile">
            <view class="menu-icon blue">✏️</view>
            <view class="menu-content">
              <view class="menu-title">编辑资料</view>
              <view class="menu-desc">修改个人信息</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="changePassword">
            <view class="menu-icon orange">🔒</view>
            <view class="menu-content">
              <view class="menu-title">修改密码</view>
              <view class="menu-desc">更改登录密码</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="bindPhone">
            <view class="menu-icon green">📱</view>
            <view class="menu-content">
              <view class="menu-title">绑定手机</view>
              <view class="menu-desc">{{userInfo.phone ? '已绑定' : '未绑定'}}</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="bindEmail">
            <view class="menu-icon purple">📧</view>
            <view class="menu-content">
              <view class="menu-title">绑定邮箱</view>
              <view class="menu-desc">{{userInfo.email ? '已绑定' : '未绑定'}}</view>
            </view>
          </view>
        </view>
      </view>

      <!-- 其他功能菜单 -->
      <view class="menu-section">
        <view class="section-title">其他功能</view>
        <view class="menu-grid">
          <view class="menu-item" bindtap="aboutUs">
            <view class="menu-icon blue">ℹ️</view>
            <view class="menu-content">
              <view class="menu-title">关于我们</view>
              <view class="menu-desc">了解更多信息</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="helpCenter">
            <view class="menu-icon yellow">❓</view>
            <view class="menu-content">
              <view class="menu-title">帮助中心</view>
              <view class="menu-desc">常见问题解答</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="feedback">
            <view class="menu-icon green">💬</view>
            <view class="menu-content">
              <view class="menu-title">意见反馈</view>
              <view class="menu-desc">告诉我们您的建议</view>
            </view>
          </view>
          
          <view class="menu-item" bindtap="settings">
            <view class="menu-icon gray">⚙️</view>
            <view class="menu-content">
              <view class="menu-title">系统设置</view>
              <view class="menu-desc">应用设置选项</view>
            </view>
          </view>
        </view>
      </view>

      <!-- 退出登录 -->
      <view class="logout-section">
        <button class="logout-btn" bindtap="logout">
          退出登录
        </button>
      </view>
    </view>
  </view>
</view>