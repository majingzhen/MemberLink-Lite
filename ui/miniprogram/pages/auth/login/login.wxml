<!--pages/auth/login/login.wxml-->
<view class="login-container">
  <!-- 头部区域 -->
  <view class="login-header">
    <view class="logo-section">
      <view class="logo">🔐</view>
      <view class="title">欢迎登录</view>
      <view class="subtitle">登录您的会员账号，开启专属服务</view>
    </view>
  </view>

  <!-- 登录方式切换 -->
  <view class="login-tabs">
    <view 
      class="tab-item {{loginType === 'password' ? 'active' : ''}}"
      data-type="password"
      bindtap="switchLoginType"
    >
      <text>密码登录</text>
    </view>
    <view 
      class="tab-item {{loginType === 'wechat' ? 'active' : ''}}"
      data-type="wechat"
      bindtap="switchLoginType"
    >
      <text>微信登录</text>
    </view>
  </view>

  <!-- 密码登录表单 -->
  <view wx:if="{{loginType === 'password'}}" class="login-form">
    <!-- 用户名输入 -->
    <view class="form-item">
      <view class="input-wrapper {{errors.username ? 'error' : ''}}">
        <view class="input-icon">👤</view>
        <input
          class="form-input"
          type="text"
          placeholder="请输入用户名/手机号/邮箱"
          value="{{formData.username}}"
          data-field="username"
          bindinput="onInput"
        />
      </view>
      <view wx:if="{{errors.username}}" class="error-text">{{errors.username}}</view>
    </view>

    <!-- 密码输入 -->
    <view class="form-item">
      <view class="input-wrapper {{errors.password ? 'error' : ''}}">
        <view class="input-icon">🔒</view>
        <input
          class="form-input"
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="请输入密码"
          value="{{formData.password}}"
          data-field="password"
          bindinput="onInput"
        />
        <view class="input-action" bindtap="togglePassword">
          <text>{{showPassword ? '👁️' : '👁️‍🗨️'}}</text>
        </view>
      </view>
      <view wx:if="{{errors.password}}" class="error-text">{{errors.password}}</view>
    </view>

    <!-- 忘记密码 -->
    <view class="forgot-password">
      <text bindtap="onForgotPassword">忘记密码？</text>
    </view>

    <!-- 登录按钮 -->
    <button 
      class="login-button {{loginLoading ? 'loading' : ''}}"
      disabled="{{loginLoading}}"
      bindtap="onPasswordLogin"
    >
      {{loginLoading ? '登录中...' : '立即登录'}}
    </button>
  </view>

  <!-- 微信登录 -->
  <view wx:if="{{loginType === 'wechat'}}" class="wechat-login">
    <view class="wechat-content">
      <view class="wechat-icon">💚</view>
      <view class="wechat-title">微信快速登录</view>
      <view class="wechat-desc">使用微信账号快速登录，安全便捷</view>
      
      <button 
        class="wechat-button {{wechatLoading ? 'loading' : ''}}"
        disabled="{{wechatLoading}}"
        bindtap="onWechatLogin"
      >
        {{wechatLoading ? '登录中...' : '微信授权登录'}}
      </button>
    </view>
  </view>

  <!-- 注册提示 -->
  <view class="register-tip">
    <text>还没有账号？</text>
    <text class="register-link" bindtap="goToRegister">立即注册</text>
  </view>

  <!-- 协议提示 -->
  <view class="agreement-tip">
    <text>登录即表示同意</text>
    <text class="agreement-link">《用户协议》</text>
    <text>和</text>
    <text class="agreement-link">《隐私政策》</text>
  </view>
</view>